@inherits BlazoredSubMenuBase
@using Microsoft.AspNetCore.Components.Web

  <li class="@CssString" disabled="@(!IsEnabled)">
    @if (HeaderTemplate != null)
    {
        <div role="button" tabindex="0" @onclick="ToggleSubMenu" @onkeydown="KeyDownHandler">@HeaderTemplate</div>
    }
    else
    {
		<div role="button" tabindex="0" @onclick="ToggleSubMenu" @onkeydown="KeyDownHandler">@Header</div>
        }

        <ul class="blazored-sub-menu">
            @if (MenuTemplate != null)
            {
                @MenuTemplate
						}
						else
						{
							foreach (var item in MenuItems)
							{
								if (!item.IsVisible)
									continue;

								 @if (item.MenuItems != null && item.IsVisible)
                {
                  <BlazoredSubMenu Header="@item.Title" IsEnabled="@item.IsEnabled" MenuItems="@item.MenuItems" Css="" />
                }
                else if (item.IsVisible)
                {
                    <BlazoredMenuItem MenuItem="@item" IsEnabled="@item.IsEnabled" />
                }
							}
						}
        </ul>
    </li>